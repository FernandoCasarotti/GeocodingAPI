function returnPlaces() {
    const places = [];
    places.push({
        places_id: 3856,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 1476,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.647730573999 -23.5382302979004)"
    });
    places.push({
        places_id: 3836,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 1327,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6464801989135 -23.5389327023074)"
    });
    places.push({
        places_id: 3852,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 1236,
        place_firstyear: 1908,
        place_lastyear: 2000,
        place_geom: "POINT(-46.645727302834 -23.5393556454149)"
    });
    places.push({
        places_id: 3832,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 1183,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6452869753317 -23.5396039184201)"
    });
    places.push({
        places_id: 3828,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 881,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6427252720891 -23.540926037818)"
    });
    places.push({
        places_id: 3848,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 864,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6425853088125 -23.5410052832779)"
    });
    places.push({
        places_id: 2841,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 694,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.641174845555 -23.5418038699661)"
    });
    places.push({
        places_id: 3825,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 519,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6397172879865 -23.5426261441524)"
    });
    places.push({
        places_id: 3845,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 508,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6396213236944 -23.5426801129286)"
    });
    places.push({
        places_id: 3839,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 427,
        place_firstyear: 1933,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6464801989135 -23.5389327023074)"
    });
    places.push({
        places_id: 3822,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 399,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6387184248771 -23.5431878887183)"
    });
    places.push({
        places_id: 3837,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 357,
        place_firstyear: 1933,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6464801989135 -23.5389327023074)"
    });
    places.push({
        places_id: 3833,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 315,
        place_firstyear: 1911,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6452869753317 -23.5396039184201)"
    });
    places.push({
        places_id: 2845,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 300,
        place_firstyear: 1911,
        place_lastyear: 1933,
        place_geom: "POINT(-46.647730573999 -23.5382302979004)"
    });
    places.push({
        places_id: 3857,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 300,
        place_firstyear: 1911,
        place_lastyear: 1933,
        place_geom: "POINT(-46.647730573999 -23.5382302979004)"
    });
    places.push({
        places_id: 3834,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 297,
        place_firstyear: 1908,
        place_lastyear: 1911,
        place_geom: "POINT(-46.6452869753317 -23.5396039184201)"
    });
    places.push({
        places_id: 3858,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 288,
        place_firstyear: 1908,
        place_lastyear: 1911,
        place_geom: "POINT(-46.647730573999 -23.5382302979004)"
    });
    places.push({
        places_id: 2846,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 288,
        place_firstyear: 1908,
        place_lastyear: 1911,
        place_geom: "POINT(-46.647730573999 -23.5382302979004)"
    });
    places.push({
        places_id: 3853,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 252,
        place_firstyear: 1911,
        place_lastyear: 1933,
        place_geom: "POINT(-46.645727302834 -23.5393556454149)"
    });
    places.push({
        places_id: 3835,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 251,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.6452869753317 -23.5396039184201)"
    });
    places.push({
        places_id: 3829,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 249.1,
        place_firstyear: 1911,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6427252720891 -23.540926037818)"
    });
    places.push({
        places_id: 3842,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 248,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6377464171386 -23.5437348856786)"
    });
    places.push({
        places_id: 3854,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 240,
        place_firstyear: 1908,
        place_lastyear: 1911,
        place_geom: "POINT(-46.645727302834 -23.5393556454149)"
    });
    places.push({
        places_id: 3830,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 233,
        place_firstyear: 1908,
        place_lastyear: 1911,
        place_geom: "POINT(-46.6427252720891 -23.540926037818)"
    });
    places.push({
        places_id: 3859,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 222,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.647730573999 -23.5382302979004)"
    });
    places.push({
        places_id: 2847,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 222,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.647730573999 -23.5382302979004)"
    });
    places.push({
        places_id: 3819,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 209,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6371324576088 -23.544082609258)"
    });
    places.push({
        places_id: 3831,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 187,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.6427252720891 -23.540926037818)"
    });
    places.push({
        places_id: 3855,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 172,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.645727302834 -23.5393556454149)"
    });
    places.push({
        places_id: 3826,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 167,
        place_firstyear: 1908,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6397172879865 -23.5426261441524)"
    });
    places.push({
        places_id: 2842,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 134,
        place_firstyear: 1911,
        place_lastyear: 1933,
        place_geom: "POINT(-46.641174845555 -23.5418038699661)"
    });
    places.push({
        places_id: 3849,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 134,
        place_firstyear: 1911,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6425853088125 -23.5410052832779)"
    });
    places.push({
        places_id: 3850,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 132,
        place_firstyear: 1908,
        place_lastyear: 1911,
        place_geom: "POINT(-46.6425853088125 -23.5410052832779)"
    });
    places.push({
        places_id: 2843,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 132,
        place_firstyear: 1908,
        place_lastyear: 1911,
        place_geom: "POINT(-46.641174845555 -23.5418038699661)"
    });
    places.push({
        places_id: 3823,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 131,
        place_firstyear: 1908,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6387184248771 -23.5431878887183)"
    });
    places.push({
        places_id: 3827,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 125,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.6397172879865 -23.5426261441524)"
    });
    places.push({
        places_id: 3824,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 101,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.6387184248771 -23.5431878887183)"
    });
    places.push({
        places_id: 3851,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 84,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.6425853088125 -23.5410052832779)"
    });
    places.push({
        places_id: 3820,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 77,
        place_firstyear: 1908,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6371324576088 -23.544082609258)"
    });
    places.push({
        places_id: 3846,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 50,
        place_firstyear: 1908,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6396213236944 -23.5426801129286)"
    });
    places.push({
        places_id: 3821,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 49,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.6371324576088 -23.544082609258)"
    });
    places.push({
        places_id: 3847,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 28,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.6396213236944 -23.5426801129286)"
    });
    places.push({
        places_id: 3843,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 24,
        place_firstyear: 1908,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6377464171386 -23.5437348856786)"
    });
    places.push({
        places_id: 3844,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 16.1,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.6377464171386 -23.5437348856786)"
    });
    places.push({
        places_id: 2839,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 16,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6355255420263 -23.5450003597045)"
    });
    places.push({
        places_id: 3840,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 16,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6355255420263 -23.5450003597045)"
    });
    places.push({
        places_id: 3816,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 15,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6355090646173 -23.5450080655771)"
    });
    places.push({
        places_id: 2837,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 15,
        place_firstyear: 1933,
        place_lastyear: 2000,
        place_geom: "POINT(-46.6355090646173 -23.5450080655771)"
    });
    places.push({
        places_id: 2838,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 3,
        place_firstyear: 1908,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6355090646173 -23.5450080655771)"
    });
    places.push({
        places_id: 3817,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 3,
        place_firstyear: 1908,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6355090646173 -23.5450080655771)"
    });
    places.push({
        places_id: 2840,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 2,
        place_firstyear: 1908,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6355255420263 -23.5450003597045)"
    });
    places.push({
        places_id: 3841,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 2,
        place_firstyear: 1908,
        place_lastyear: 1933,
        place_geom: "POINT(-46.6355255420263 -23.5450003597045)"
    });
    places.push({
        places_id: 3818,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 1,
        place_firstyear: 1908,
        place_lastyear: 1908,
        place_geom: "POINT(-46.6355090646173 -23.5450080655771)"
    });
    places.push({
        places_id: 3641,
        id_street: 45,
        street_name: "avenida sao joao",
        place_name: "",
        place_number: 0,
        place_firstyear: 1930,
        place_lastyear: 2000,
        place_geom: "MULTIPOINT(-46.635384183202 -23.54506646798)"
    });
    places.push({
        places_id: 3905,
        id_street: 326,
        street_name: "rua de sao joao",
        place_name: "",
        place_number: 0,
        place_firstyear: 1930,
        place_lastyear: 2000,
        place_geom: "MULTIPOINT(-46.649808697016 -23.53701018025)"
    });
    places.push({
        places_id: 3895,
        id_street: 316,
        street_name: "travessa sao joao",
        place_name: "",
        place_number: 0,
        place_firstyear: 1930,
        place_lastyear: 2000,
        place_geom: "MULTIPOINT(-46.641718501284 -23.54149606894)"
    });
    return places;
}
function returnStreets() {
    const streets = [];
    streets.push({
        id: 45,
        street_name: "avenida sao joao",
        street_geom: "MULTILINESTRING((-46.6353841832019 -23.5450664679801,-46.635540148197 -23.5449935289405,-46.6360190039202 -23.5447131597841,-46.6365714561248 -23.5444003393926,-46.6378357545296 -23.5436842883414,-46.6404998959258 -23.5421860180201,-46.6432215089599 -23.5406450746967,-46.6432637237479 -23.540633666924,-46.6433126510678 -23.5406242435679,-46.6433579825745 -23.5406244497775,-46.6434033396228 -23.5406267110451,-46.6434412155873 -23.5406249406563,-46.6434879224028 -23.5406162258195,-46.6435241590976 -23.5406021406839,-46.6439705094111 -23.540346711571,-46.6456570053947 -23.5393951353502,-46.6496131954273 -23.537172725974,-46.64972354347 -23.5371045450382,-46.6498086970157 -23.537010180254))",
        street_firstyear: 1930,
        street_lastyear: 1940
    });
    streets.push({
        id: 316,
        street_name: "travessa sao joao",
        street_geom: "MULTILINESTRING((-46.6423666661099 -23.5420467506412,-46.6417185012839 -23.5414960689462))",
        street_firstyear: 1930,
        street_lastyear: 1940
    });
    streets.push({
        id: 326,
        street_name: "rua de sao joao",
        street_geom: "MULTILINESTRING((-46.6498086970157 -23.537010180254,-46.6498238932755 -23.5369982052971),(-46.6519494072676 -23.5341328897629,-46.6514868451012 -23.5348230991783,-46.6507494837363 -23.535776789372,-46.6498238932755 -23.5369982052971))",
        street_firstyear: 1930,
        street_lastyear: 1940
    });
    return streets;
}

require('isomorphic-fetch');
const index = require('../routes/index');

jest.mock('pg', ()=> {
    function returnPlaces() {
        const places = [];
        places.push({
            places_id: 3856,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 1476,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.647730573999 -23.5382302979004)"
        });
        places.push({
            places_id: 3836,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 1327,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6464801989135 -23.5389327023074)"
        });
        places.push({
            places_id: 3852,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 1236,
            place_firstyear: 1908,
            place_lastyear: 2000,
            place_geom: "POINT(-46.645727302834 -23.5393556454149)"
        });
        places.push({
            places_id: 3832,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 1183,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6452869753317 -23.5396039184201)"
        });
        places.push({
            places_id: 3828,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 881,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6427252720891 -23.540926037818)"
        });
        places.push({
            places_id: 3848,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 864,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6425853088125 -23.5410052832779)"
        });
        places.push({
            places_id: 2841,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 694,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.641174845555 -23.5418038699661)"
        });
        places.push({
            places_id: 3825,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 519,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6397172879865 -23.5426261441524)"
        });
        places.push({
            places_id: 3845,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 508,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6396213236944 -23.5426801129286)"
        });
        places.push({
            places_id: 3839,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 427,
            place_firstyear: 1933,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6464801989135 -23.5389327023074)"
        });
        places.push({
            places_id: 3822,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 399,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6387184248771 -23.5431878887183)"
        });
        places.push({
            places_id: 3837,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 357,
            place_firstyear: 1933,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6464801989135 -23.5389327023074)"
        });
        places.push({
            places_id: 3833,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 315,
            place_firstyear: 1911,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6452869753317 -23.5396039184201)"
        });
        places.push({
            places_id: 2845,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 300,
            place_firstyear: 1911,
            place_lastyear: 1933,
            place_geom: "POINT(-46.647730573999 -23.5382302979004)"
        });
        places.push({
            places_id: 3857,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 300,
            place_firstyear: 1911,
            place_lastyear: 1933,
            place_geom: "POINT(-46.647730573999 -23.5382302979004)"
        });
        places.push({
            places_id: 3834,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 297,
            place_firstyear: 1908,
            place_lastyear: 1911,
            place_geom: "POINT(-46.6452869753317 -23.5396039184201)"
        });
        places.push({
            places_id: 3858,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 288,
            place_firstyear: 1908,
            place_lastyear: 1911,
            place_geom: "POINT(-46.647730573999 -23.5382302979004)"
        });
        places.push({
            places_id: 2846,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 288,
            place_firstyear: 1908,
            place_lastyear: 1911,
            place_geom: "POINT(-46.647730573999 -23.5382302979004)"
        });
        places.push({
            places_id: 3853,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 252,
            place_firstyear: 1911,
            place_lastyear: 1933,
            place_geom: "POINT(-46.645727302834 -23.5393556454149)"
        });
        places.push({
            places_id: 3835,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 251,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.6452869753317 -23.5396039184201)"
        });
        places.push({
            places_id: 3829,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 249.1,
            place_firstyear: 1911,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6427252720891 -23.540926037818)"
        });
        places.push({
            places_id: 3842,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 248,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6377464171386 -23.5437348856786)"
        });
        places.push({
            places_id: 3854,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 240,
            place_firstyear: 1908,
            place_lastyear: 1911,
            place_geom: "POINT(-46.645727302834 -23.5393556454149)"
        });
        places.push({
            places_id: 3830,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 233,
            place_firstyear: 1908,
            place_lastyear: 1911,
            place_geom: "POINT(-46.6427252720891 -23.540926037818)"
        });
        places.push({
            places_id: 3859,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 222,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.647730573999 -23.5382302979004)"
        });
        places.push({
            places_id: 2847,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 222,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.647730573999 -23.5382302979004)"
        });
        places.push({
            places_id: 3819,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 209,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6371324576088 -23.544082609258)"
        });
        places.push({
            places_id: 3831,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 187,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.6427252720891 -23.540926037818)"
        });
        places.push({
            places_id: 3855,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 172,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.645727302834 -23.5393556454149)"
        });
        places.push({
            places_id: 3826,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 167,
            place_firstyear: 1908,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6397172879865 -23.5426261441524)"
        });
        places.push({
            places_id: 2842,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 134,
            place_firstyear: 1911,
            place_lastyear: 1933,
            place_geom: "POINT(-46.641174845555 -23.5418038699661)"
        });
        places.push({
            places_id: 3849,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 134,
            place_firstyear: 1911,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6425853088125 -23.5410052832779)"
        });
        places.push({
            places_id: 3850,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 132,
            place_firstyear: 1908,
            place_lastyear: 1911,
            place_geom: "POINT(-46.6425853088125 -23.5410052832779)"
        });
        places.push({
            places_id: 2843,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 132,
            place_firstyear: 1908,
            place_lastyear: 1911,
            place_geom: "POINT(-46.641174845555 -23.5418038699661)"
        });
        places.push({
            places_id: 3823,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 131,
            place_firstyear: 1908,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6387184248771 -23.5431878887183)"
        });
        places.push({
            places_id: 3827,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 125,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.6397172879865 -23.5426261441524)"
        });
        places.push({
            places_id: 3824,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 101,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.6387184248771 -23.5431878887183)"
        });
        places.push({
            places_id: 3851,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 84,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.6425853088125 -23.5410052832779)"
        });
        places.push({
            places_id: 3820,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 77,
            place_firstyear: 1908,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6371324576088 -23.544082609258)"
        });
        places.push({
            places_id: 3846,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 50,
            place_firstyear: 1908,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6396213236944 -23.5426801129286)"
        });
        places.push({
            places_id: 3821,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 49,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.6371324576088 -23.544082609258)"
        });
        places.push({
            places_id: 3847,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 28,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.6396213236944 -23.5426801129286)"
        });
        places.push({
            places_id: 3843,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 24,
            place_firstyear: 1908,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6377464171386 -23.5437348856786)"
        });
        places.push({
            places_id: 3844,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 16.1,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.6377464171386 -23.5437348856786)"
        });
        places.push({
            places_id: 2839,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 16,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6355255420263 -23.5450003597045)"
        });
        places.push({
            places_id: 3840,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 16,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6355255420263 -23.5450003597045)"
        });
        places.push({
            places_id: 3816,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 15,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6355090646173 -23.5450080655771)"
        });
        places.push({
            places_id: 2837,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 15,
            place_firstyear: 1933,
            place_lastyear: 2000,
            place_geom: "POINT(-46.6355090646173 -23.5450080655771)"
        });
        places.push({
            places_id: 2838,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 3,
            place_firstyear: 1908,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6355090646173 -23.5450080655771)"
        });
        places.push({
            places_id: 3817,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 3,
            place_firstyear: 1908,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6355090646173 -23.5450080655771)"
        });
        places.push({
            places_id: 2840,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 2,
            place_firstyear: 1908,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6355255420263 -23.5450003597045)"
        });
        places.push({
            places_id: 3841,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 2,
            place_firstyear: 1908,
            place_lastyear: 1933,
            place_geom: "POINT(-46.6355255420263 -23.5450003597045)"
        });
        places.push({
            places_id: 3818,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 1,
            place_firstyear: 1908,
            place_lastyear: 1908,
            place_geom: "POINT(-46.6355090646173 -23.5450080655771)"
        });
        places.push({
            places_id: 3641,
            id_street: 45,
            street_name: "avenida sao joao",
            place_name: "",
            place_number: 0,
            place_firstyear: 1930,
            place_lastyear: 2000,
            place_geom: "MULTIPOINT(-46.635384183202 -23.54506646798)"
        });
        places.push({
            places_id: 3905,
            id_street: 326,
            street_name: "rua de sao joao",
            place_name: "",
            place_number: 0,
            place_firstyear: 1930,
            place_lastyear: 2000,
            place_geom: "MULTIPOINT(-46.649808697016 -23.53701018025)"
        });
        places.push({
            places_id: 3895,
            id_street: 316,
            street_name: "travessa sao joao",
            place_name: "",
            place_number: 0,
            place_firstyear: 1930,
            place_lastyear: 2000,
            place_geom: "MULTIPOINT(-46.641718501284 -23.54149606894)"
        });
        return places;
    }
    function returnStreets() {
        const streets = [];
        streets.push({
            id: 45,
            street_name: "avenida sao joao",
            street_geom: "MULTILINESTRING((-46.6353841832019 -23.5450664679801,-46.635540148197 -23.5449935289405,-46.6360190039202 -23.5447131597841,-46.6365714561248 -23.5444003393926,-46.6378357545296 -23.5436842883414,-46.6404998959258 -23.5421860180201,-46.6432215089599 -23.5406450746967,-46.6432637237479 -23.540633666924,-46.6433126510678 -23.5406242435679,-46.6433579825745 -23.5406244497775,-46.6434033396228 -23.5406267110451,-46.6434412155873 -23.5406249406563,-46.6434879224028 -23.5406162258195,-46.6435241590976 -23.5406021406839,-46.6439705094111 -23.540346711571,-46.6456570053947 -23.5393951353502,-46.6496131954273 -23.537172725974,-46.64972354347 -23.5371045450382,-46.6498086970157 -23.537010180254))",
            street_firstyear: 1930,
            street_lastyear: 1940
        });
        streets.push({
            id: 316,
            street_name: "travessa sao joao",
            street_geom: "MULTILINESTRING((-46.6423666661099 -23.5420467506412,-46.6417185012839 -23.5414960689462))",
            street_firstyear: 1930,
            street_lastyear: 1940
        });
        streets.push({
            id: 326,
            street_name: "rua de sao joao",
            street_geom: "MULTILINESTRING((-46.6498086970157 -23.537010180254,-46.6498238932755 -23.5369982052971),(-46.6519494072676 -23.5341328897629,-46.6514868451012 -23.5348230991783,-46.6507494837363 -23.535776789372,-46.6498238932755 -23.5369982052971))",
            street_firstyear: 1930,
            street_lastyear: 1940
        });
        return streets;
    }
    return {
        connect : jest.fn(),
        Pool: jest.fn().mockImplementation(() => {
            let placesSQlStreets = {
                places: [],
                streets: []
            };
            return placesSQlStreets;
        }),
        Client: jest.fn().mockImplementation(() => {
            const result = [];
            const mClient = {
                connect: jest.fn(() => {
                    return '';
                }),
                query: jest.fn((queryString) => {
                    if (queryString == "select a.id as places_id, b.name as name_s, a.number::float, a.first_year::integer as firstyear, a.last_year::integer as lastyear, ST_AsText(a.geom) as geom from streets_pilot_area as b join places_pilot_area2 as a on a.id_street::integer = b.id::integer where a.number::float > 1 and b.name IS NOT NULL order by name_s, a.first_year, a.last_year, a.number;"
                        || queryString == "Placeslist") {
                        return ["avenida sao joao, 16.1, 1908",
                            "avenida sao joao, 28, 1908",
                            "avenida sao joao, 49, 1908",
                            "avenida sao joao, 84, 1908",
                            "avenida sao joao, 101, 1908",
                            "avenida sao joao, 125, 1908",
                            "avenida sao joao, 172, 1908",
                            "avenida sao joao, 187, 1908",
                            "avenida sao joao, 222, 1908",
                            "avenida sao joao, 222, 1908",
                            "avenida sao joao, 251, 1908",
                            "avenida sao joao, 132, 1908",
                            "avenida sao joao, 132, 1908",
                            "avenida sao joao, 233, 1908",
                            "avenida sao joao, 240, 1908",
                            "avenida sao joao, 288, 1908",
                            "avenida sao joao, 288, 1908",
                            "avenida sao joao, 297, 1908",
                            "avenida sao joao, 2, 1908",
                            "avenida sao joao, 2, 1908",
                            "avenida sao joao, 3, 1908",
                            "avenida sao joao, 3, 1908",
                            "avenida sao joao, 24, 1908",
                            "avenida sao joao, 50, 1908",
                            "avenida sao joao, 77, 1908",
                            "avenida sao joao, 131, 1908",
                            "avenida sao joao, 167, 1908",
                            "avenida sao joao, 1236, 1908",
                            "avenida sao joao, 134, 1911",
                            "avenida sao joao, 134, 1911",
                            "avenida sao joao, 249.1, 1911",
                            "avenida sao joao, 252, 1911",
                            "avenida sao joao, 300, 1911",
                            "avenida sao joao, 300, 1911",
                            "avenida sao joao, 315, 1911",
                            "avenida sao joao, 357, 1933",
                            "avenida sao joao, 427, 1933",
                            "avenida sao joao, 15, 1933",
                            "avenida sao joao, 15, 1933",
                            "avenida sao joao, 16, 1933",
                            "avenida sao joao, 16, 1933",
                            "avenida sao joao, 209, 1933",
                            "avenida sao joao, 248, 1933",
                            "avenida sao joao, 399, 1933",
                            "avenida sao joao, 508, 1933",
                            "avenida sao joao, 519, 1933",
                            "avenida sao joao, 694, 1933",
                            "avenida sao joao, 864, 1933",
                            "avenida sao joao, 881, 1933",
                            "avenida sao joao, 1183, 1933",
                            "avenida sao joao, 1327, 1933",
                            "avenida sao joao, 1476, 1933",
                            "avenida sao joao, 1476, 1933"];
                        // Places
                    }
                    else if (queryString == "select a.id as places_id, a.id_street, b.name as name_s, a.number::float, a.first_year::integer as firstyear, a.last_year::integer as lastyear, ST_AsText(a.geom) as geom from streets_pilot_area as b join places_pilot_area2 as a on a.id_street::integer = b.id::integer union select a.id as places_id, a.id_street, b.name as name_s, a.number::float, a.first_year::integer as firstyear, a.last_year::integer as lastyear, ST_AsText(a.geom) as geom from streets_pilot_area as b join places_pilot_area as a on a.id_street::integer = b.id::integer where a.number::float = 0.0 order by number;"
                        || queryString == "Places") {
                        return returnPlaces();
                        // Streets
                    }
                    else if(queryString == "select id, name, first_year::integer as firstyear, last_year::integer as lastyear, ST_astext(geom) as geom from streets_pilot_area;"
                        || queryString == "Streets") {
                        return returnStreets();
                    }
                    else if(queryString.includes('saboya_geometry')) {
                        let places = returnPlaces();
                        let idstreetNnumber = queryString.replace("SELECT saboya_geometry(","").replace(") AS saboya_geometry;","").split(", ");
                        for(var i = 0; i < places.length; i++) {
                            if(places[i].id_street == parseInt(idstreetNnumber[0]) && places[i].place_number == parseInt(idstreetNnumber[1])) {
                                result.push({
                                    places_id: places[i].places_id,
                                    id_street: places[i].id_street,
                                    street_name: places[i].street_name,
                                    place_name: places[i].place_name,
                                    place_number: places[i].place_number,
                                    place_firstyear: places[i].place_firstyear,
                                    place_lastyear: places[i].place_lastyear,
                                    place_geom: places[i].place_geom,
                                    saboya_geometry: places[i].place_geom
                                })
                            }
                        }
                        return result;
                }
                    else if(queryString == "") {
                        /*result.push({
                            name: places_filter[0].place_name,
                            geom: places_filter[0].place_geom,
                            confidence: 1,
                            status: 1,
                            alertMsg: ""
                        });*/
                        return result;
                    }
                }),
            };
            return mClient;
        })
    }
});


console.log('Local Services Test Suite');

console.log('Geocoding');

test('01. Placeslist', () => {
    const result = index.handlerPlaceslist("", new Response());
    expect(result).toBeTruthy();
})

test('02. Places', () => {
    const result = index.handlerPlaces("", new Response());
    expect(result).toBeTruthy();
})

test('03. Streets', () => {
    const result = index.handlerStreets("", new Response());
    expect(result).toBeTruthy();
})

test('04. Search in a year before 1870', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 24,
        year: 1869,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].alertMsg).toBe('The scope of this service does not contemplate periods before 1870');
})

test('05. Search in a year after 1940', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 24,
        year: 1941,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(0);
    expect(result[1][0].alertMsg).toBe('The scope of this service does not contemplate periods after 1940');
})

test('06. Search in the limit year 1870', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 24,
        year: 1870,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(0);
})

test('07. Search in the limit year 1940', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 24,
        year: 1940,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(1);
})

test('08. Contains text in the year field', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 24,
        year: 'c1940',
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].alertMsg).toBe('There are non numerical characters in the year field');
})

test('09. Does not contain text in the textpoint field', async () => {
    const req = {
        textpoint: '',
        number: 24,
        year: 1940,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].alertMsg).toBe('There is no textpoint to be searched');
})

test('10. Textpoint has a length lower than 3', async () => {
    const req = {
        textpoint: 'rua',
        number: 24,
        year: 1940,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].alertMsg).toBe('The textpoint boundaries are: 3<x<256');
})

test('11. Textpoint has a length higher than 256', async () => {
    const req = {
        textpoint: 'zVPTjSh7Oyirb8m8Hqvh2iAmKXBVUIM4qCR5VD5tvMey9DcL8cG7NqrwASqR8TEAaE1kkIJhu4mTDITQZOsB9eAPpPCgm9dcqQw9PUAB0mAcGltD2fXmwJE3fVB7xwYNevMjXfu82OzXMMmb9RUx6XUowsjm0PQhkqJKtPN51dV0JraJlGEFsjSXzYTZ9ykeWv2ecxpzW39dEjLNCSyxwBzF54z0SSIFBnp5xT1RuUmyMVwhsXz4C1ZhOpfTKiYk',
        number: 24,
        year: 1940,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].alertMsg).toBe('The textpoint boundaries are: 3<x<256');
})

test('12. Textpoint has a length equal to 4', async () => {
    const req = {
        textpoint: 'aven',
        number: 24,
        year: 1940,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].name).toBe('Point not found');
})

test('13. Number less than 0', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: -1,
        year: 1908,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].alertMsg).toBe('Number should be >= 0');
})

test('14. Number higher than 10.000', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 10000,
        year: 1908,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].alertMsg).toBe('Number should be < 10.000');
})

test('15. Number equal to 0', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 0,
        year: 1908,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(1);
})

test('16. Number equal to 9.999', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 9999,
        year: 1908,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(0);
})

test('17. Contains text in the number field', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 'c24',
        year: 1908,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].alertMsg).toBe('There are non numerical characters in the number field');
})

test('18. Search in existing street a number higher than the highest place existant', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 1700,
        year: 1935,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(1);
})

test('19. Search in existing street a number lower than the lowest place existant', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 2,
        year: 1908,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(0);
})

test('20. Search in existing street a number in between existing places', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 1000,
        year: 1908,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(1);
})

test('21. Search an address without a place in it, in a existing street, over extrapolating the year', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 1700,
        year: 1935,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(1);
})

test('22. Search an address without a place in it, in a existing street, under extrapolating the year', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 1000,
        year: 1905,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(0);
})

test('23. Search an address with a place in it, in a existing street, over extrapolating the year', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 24,
        year: 1980,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(1);
})

test('24. Search an address with a place in it, in a existing street, under extrapolating the year', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 24,
        year: 1902,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(1);
})

test('25. Place that exist in the year logged', async () => {
    const req = {
        textpoint: 'avenida sao joao',
        number: 24,
        year: 1908,
        streets: returnStreets(),
        places: returnPlaces()
    };
    const result = await index.handlerGeocolocation(req, new Response());
    expect(result[1][0].status).toBe(1);
})
